### scale-out, scale-up

- scale-out

```
아주 많은 값싼 서버들을 이용함
```

- scale-up

```
적은 수의 값비싼 서버들을 이용함
```



### mapreduce를 사용하는 이유

데이터 중심 프로세싱

- 한대의 컴퓨터의 능력으로 처리가 어려움

- 근본적으로 수 십대, 수 백대 혹은 수 천대의 컴퓨터를 묶어서 처리해야함

- 기존에 존재하는 여러 가지 다른 병렬 컴퓨팅 방법에서는 프로그래머가 낮은 레벨의 시스템 세부 내용까지 아주 잘 알고 많은 시간을 쏟아야만 함

  

### 맵리듀스 프레임워크

- 맵리듀스 프레임워크에서는 각각의 레코드 또는 튜플은 키-밸류 쌍으로 표현된다.
- 맵리듀스 프레임워크는 메인 함수를 한 개의 마스터 머신에서 수행하는데 이 머신은 맵 함수를 수행하기 전에 전처리를 하거나 리듀스 함수의 결과를 후처리 하는데 사용될 수 있다.
- 컴퓨팅은 맵과 리듀스라는 유저가 정의한 함수 한 쌍으로 이루어진 맵 리듀스 페이즈를 한 번 수행하거나 여러 번 반복해서 수행할 수 있다.
- 한번의 맵 리듀스 페이즈는 맵 함수를 먼저 호출하고 그 다음에 리듀스 함수를 호출하는데 때에 따라서는 맵 함수가 끝난 후에 컴바인 함수를 중간에 수행할 수 있다.
- 드라이버에 해당하는 메인 프로그램에서 맵리듀스 페이즈를 수행시킨다.



### 맵리듀스 페이즈 (3단계)

- 맵 페이즈

  - 제일 먼저 수행되며 데이터의 여러 파티션에 병렬 분산으로 호출되어 수행된다.
  - 각 머신마다 수행된 mapper는 맵 함수가 입력 데이터의 한 줄 마다 맵 함수를 호출한다.
  - map 함수는 쌍 형태로 결과를 출력하고 여러 머신에 나누어 보내며 같은 key를 가진 (key, value) 쌍은 같은 머신으로 보내진다.

- 셔플링 페이즈

  - 모든 머신에서 맵 페이즈가 다 끝나면 시작된다.
  - 맵 페이즈에서 각각의 머신으로 보내진 키밸류 쌍을 키를 이용해서 정렬을 한 후에 각각의 키마다 같은 키를 가진 키밸류 쌍을 모아서 밸류-리스트를 만든 다음에 키밸류-리스트 형태로 키에 따라서 여러 머신에 분산해서 보낸다.

- 리듀스 페이즈

  - 모든 머신에서 셔플링 페이즈가 다 끝나면 각 머신마다 리듀스 페이즈가 시작된다.

  - 각각의 머신에서 셔플링 페이즈에서 해당 머신으로 보내진 각각의 키밸류-리스트 쌍 마다 리듀스 함수가 호출되며 하나의 리듀스 함수가 끝나면 다음 키밸류-리스트 쌍에 리듀스 함수가 호출된다.
  - 출력이 있다면 키밸류 쌍 형태로 출력한다.



### Hadoop

- Apache 프로젝트의 맵리듀스 프레임워크의 오픈 소스
- 주요 구성 요소들
  - MapReduce - 소프트웨어의 수행을 분산함
  - Hadoiop Distributed File System (HDFS) - 데이터를 분산함
- 한 개의 Namenode(master)와 여러 개의 Datanode(slaves)
  - Namenode
    - 파일 시스템을 관리하고 클라이언트가 파일에 접근할 수 있게 함
  - Datanode
    - 컴퓨터에 들어있는 데이터를 접근할 수 있게 함
- 자바 언어로 맵리듀스 알고리즘 구현함